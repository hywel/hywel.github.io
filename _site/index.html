<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>blog</title>
  <meta name="description" content="A Jekyll theme that uses the Tuft theme by Clay Harmon">


  <link rel="stylesheet" href="/css/tufte.css">	
  

  <!-- Google Fonts loaded here depending on setting in _data/options.yml true loads font, blank does not-->
  
    <link href='//fonts.googleapis.com/css?family=Lato:400,400italic' rel='stylesheet' type='text/css'>
  
  <!-- Load up MathJax script if needed ... specify in /_data/options.yml file-->
  
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  

  <link rel="canonical" href="/">
  <link rel="alternate" type="application/rss+xml" title="Hywel Stoakes" href="/feed.xml" />
</head>

  <body class="full-width">
    <!--- Header and nav template site-wide -->
<header>
    <nav class="group">
	<a href="/"><img class="badge" src="/assets/img/badge_1.png" alt="CH"></a>
	
		
		    
		      <a class="active" href="/index.html" class="active">blog</a>
		    
	    
  	
	</nav>
</header>
    <article>
        <h1 class="content-listing-header sans">Articles</h1>
  <ul class="content-listing ">
          
        <li class="listing">
          <hr class="slender">
          <a href="/articles/16/The-Next-Step"><h3 class="contrast">Serve Jekyll Websites with servr and knitr</h3></a>
          <br><span class="smaller">January 5, 2016</span>  <br/>
          <div><h1 id="writing-in-rstudio">Writing in Rstudio</h1>
<p>This blog post has been rwitten in Rstudio and using the <code>rmd2md</code> function. When this is run it will convert any file (with the <code>*.rmd</code> extention) that is found in the <code>_rmd</code> folder to the markdown that can be parsed by Jekyll and served on github pages.</p>

<p>be sure to include the header between three dashes:</p>

<pre><code>#layout: post
#status: process
#published: false
#date: 2016-01-05 14:23:34 +1100
#title:  "The Post Title"
#categories: tags
</code></pre>

<p>The workflow is as follows:<br />
1. Write a post with the above header, and put it in the <code>_rmd</code> folder.<br />
2. Run the rmd2md() command within <em>Rstudio</em>.<br />
3. Run <code>servr::jekyll(command="bundle exec jekyll build",serve=FALSE)</code> to check that the site builds.<br />
4. Use git within <em>Rstudio</em> to add staged files, commit changes and push to the repository.<br />
5. Check post has worked.</p>

<h1 id="testing-code-chunks-take-2">Testing code chunks take 2</h1>

<div class="highlight"><pre><code class="language-r" data-lang="r">df <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>gp <span class="o">=</span> <span class="kp">factor</span><span class="p">(</span><span class="kp">rep</span><span class="p">(</span><span class="kc">letters</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">],</span> each <span class="o">=</span> <span class="m">10</span><span class="p">)),</span>
                 y <span class="o">=</span> rnorm<span class="p">(</span><span class="m">30</span><span class="p">))</span>
<span class="c1"># Compute sample mean and standard deviation in each group</span>
ds <span class="o">&lt;-</span> plyr<span class="o">::</span>ddply<span class="p">(</span>df<span class="p">,</span> <span class="s">&quot;gp&quot;</span><span class="p">,</span> plyr<span class="o">::</span>summarise<span class="p">,</span> mean <span class="o">=</span> <span class="kp">mean</span><span class="p">(</span>y<span class="p">),</span> sd <span class="o">=</span> sd<span class="p">(</span>y<span class="p">))</span>
 
 
ggplot<span class="p">()</span> <span class="o">+</span>
  geom_point<span class="p">(</span>data <span class="o">=</span> df<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> gp<span class="p">,</span> y <span class="o">=</span> y<span class="p">))</span> <span class="o">+</span>
  geom_point<span class="p">(</span>data <span class="o">=</span> ds<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> gp<span class="p">,</span> y <span class="o">=</span> <span class="kp">mean</span><span class="p">),</span>
             colour <span class="o">=</span> <span class="s">&#39;red&#39;</span><span class="p">,</span> size <span class="o">=</span> <span class="m">3</span><span class="p">)</span> <span class="o">+</span>
  geom_errorbar<span class="p">(</span>data <span class="o">=</span> ds<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> gp<span class="p">,</span> y <span class="o">=</span> <span class="kp">mean</span><span class="p">,</span>
                               ymin <span class="o">=</span> mean <span class="o">-</span> sd<span class="p">,</span> ymax <span class="o">=</span> mean <span class="o">+</span> sd<span class="p">),</span>
                colour <span class="o">=</span> <span class="s">&#39;red&#39;</span><span class="p">,</span> width <span class="o">=</span> <span class="m">0.4</span><span class="p">)</span></code></pre></div>

<p><img src="/figures/unnamed-chunk-1-1.png" alt="plot of chunk unnamed-chunk-1" /></p>

<div class="highlight"><pre><code class="language-r" data-lang="r">ggsave<span class="p">(</span>filename <span class="o">=</span> <span class="s">&quot;figures/Rplot.png&quot;</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## Saving 7 x 7 in image</code></pre></div>

<p>Lets see if this works?</p>

</div> 
        </li>
          
        <li class="listing">
          <hr class="slender">
          <a href="/articles/16/Code-Blocks"><h3 class="contrast">Syntax Highlighting</h3></a>
          <br><span class="smaller">January 5, 2016</span>  <br/>
          <div><p>I am currently investigating how to embed code blocks and tables within a static page and have them compile on github pages. This post is using the <code>kramdown</code> markup flavour, but in the future I would like to use <a href="http://www.rstudio.com">RStudio IDE</a> and <a href="http://rmarkdown.rstudio.com">Rmarkdown</a> to add pages to a static server using <a href="http://jekyllrb.com">Jekyll</a>. I think that the <em>R</em> package <a href="https://github.com/yihui/servr"><strong>servr</strong></a> will also be very useful along with the associated <code>knitr-jekyll</code> repo developed by <a href="https://github.com/yihui">Yihui Xie</a> who also developed the incredibly useful and very powerful <a href="https://github.com/yihui/knitr">knitr</a>.</p>

<p>I have also found another <a href="http://brendanrocks.com/blogging-with-rmarkdown-knitr-jekyll/">blog post</a> that details some refinements and use the aforementioned packages as the basis. I will investigate and detail findings here…</p>

<p>Before getting on to that however, I will start with some tests using the markdown that Jekyll will both understand and github pages will compile - this makes us of Liquid tags such as “% highlight r % endhighlight %”.</p>

<p>Github pages only supports a subset of the liquid tags and doesn’t allow use of the plug-in architecture. For this reason I had to change my plans to use the very elegant <a href="https://github.com/clayh53/tufte-jekyll">Tufte Theme</a> developed by <a href="https://github.com/clayh53">Clay Harmon</a>, as this doesn’t seem to compile well on github pages - I could compile locally and then push to gituhub, but I was looking for something more flexible and quickly updatable on-the-go!</p>

<p>So back to the highlighting and visualisation of results…</p>

<h1 id="highlighting">Highlighting</h1>

<p>For example, here is the command within <em>R</em> that can be used to build a site locally, ready for pushing to github<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup>. This is different to the triple backtick syntax of <strong>RStudio</strong> flavoured Rmarkdown.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">servr<span class="o">::</span>jekyll<span class="p">(</span>command<span class="o">=</span><span class="s">&quot;bundle exec jekyll build&quot;</span><span class="p">)</span></code></pre></div>

<p>Note: That I need to use this command rather than the default <code>command="jekyll build"</code> as there seems to be some problems finding the ruby gems in <code>\usr\bin\</code> on OS X <em>El Capitan</em>. This has been detailed elsewhere and once I settle on a stable implementation I will write about the steps. A related problem is that I can’t use the autoregeneration feature <code>--watch</code> using the <code>servr::jekyll</code> function.</p>

<p>If needed the site can be compiled without serving using the following syntax:.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">servr<span class="o">::</span>jekyll<span class="p">(</span>command<span class="o">=</span><span class="s">&quot;bundle exec jekyll build&quot;</span><span class="p">,</span> serve <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span></code></pre></div>

<h1 id="early-days">Early Days</h1>

<p>All of this is still early days and I am looking forward to starting to play around with tables that are produced by <code>kable</code> which can be embedded directly onto pages.</p>

<p>For example:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">knitr<span class="o">::</span>kable<span class="p">(</span><span class="kp">head</span><span class="p">(</span>mtcars<span class="p">))</span></code></pre></div>

<p>creates the following table:<br />
<code>
|                  |  mpg| cyl| disp|  hp| drat|    wt|  qsec| vs| am| gear| carb|
|:-----------------|----:|---:|----:|---:|----:|-----:|-----:|--:|--:|----:|----:|
|Mazda RX4         | 21.0|   6|  160| 110| 3.90| 2.620| 16.46|  0|  1|    4|    4|
|Mazda RX4 Wag     | 21.0|   6|  160| 110| 3.90| 2.875| 17.02|  0|  1|    4|    4|
|Datsun 710        | 22.8|   4|  108|  93| 3.85| 2.320| 18.61|  1|  1|    4|    1|
|Hornet 4 Drive    | 21.4|   6|  258| 110| 3.08| 3.215| 19.44|  1|  0|    3|    1|
|Hornet Sportabout | 18.7|   8|  360| 175| 3.15| 3.440| 17.02|  0|  0|    3|    2|
|Valiant           | 18.1|   6|  225| 105| 2.76| 3.460| 20.22|  1|  0|    3|    1|
</code></p>

<p>Which displays a formatted table on the site that looks like this:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: right">mpg</th>
      <th style="text-align: right">cyl</th>
      <th style="text-align: right">disp</th>
      <th style="text-align: right">hp</th>
      <th style="text-align: right">drat</th>
      <th style="text-align: right">wt</th>
      <th style="text-align: right">qsec</th>
      <th style="text-align: right">vs</th>
      <th style="text-align: right">am</th>
      <th style="text-align: right">gear</th>
      <th style="text-align: right">carb</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Mazda RX4</td>
      <td style="text-align: right">21.0</td>
      <td style="text-align: right">6</td>
      <td style="text-align: right">160</td>
      <td style="text-align: right">110</td>
      <td style="text-align: right">3.90</td>
      <td style="text-align: right">2.620</td>
      <td style="text-align: right">16.46</td>
      <td style="text-align: right">0</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">4</td>
      <td style="text-align: right">4</td>
    </tr>
    <tr>
      <td style="text-align: left">Mazda RX4 Wag</td>
      <td style="text-align: right">21.0</td>
      <td style="text-align: right">6</td>
      <td style="text-align: right">160</td>
      <td style="text-align: right">110</td>
      <td style="text-align: right">3.90</td>
      <td style="text-align: right">2.875</td>
      <td style="text-align: right">17.02</td>
      <td style="text-align: right">0</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">4</td>
      <td style="text-align: right">4</td>
    </tr>
    <tr>
      <td style="text-align: left">Datsun 710</td>
      <td style="text-align: right">22.8</td>
      <td style="text-align: right">4</td>
      <td style="text-align: right">108</td>
      <td style="text-align: right">93</td>
      <td style="text-align: right">3.85</td>
      <td style="text-align: right">2.320</td>
      <td style="text-align: right">18.61</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">4</td>
      <td style="text-align: right">1</td>
    </tr>
    <tr>
      <td style="text-align: left">Hornet 4 Drive</td>
      <td style="text-align: right">21.4</td>
      <td style="text-align: right">6</td>
      <td style="text-align: right">258</td>
      <td style="text-align: right">110</td>
      <td style="text-align: right">3.08</td>
      <td style="text-align: right">3.215</td>
      <td style="text-align: right">19.44</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">0</td>
      <td style="text-align: right">3</td>
      <td style="text-align: right">1</td>
    </tr>
    <tr>
      <td style="text-align: left">Hornet Sportabout</td>
      <td style="text-align: right">18.7</td>
      <td style="text-align: right">8</td>
      <td style="text-align: right">360</td>
      <td style="text-align: right">175</td>
      <td style="text-align: right">3.15</td>
      <td style="text-align: right">3.440</td>
      <td style="text-align: right">17.02</td>
      <td style="text-align: right">0</td>
      <td style="text-align: right">0</td>
      <td style="text-align: right">3</td>
      <td style="text-align: right">2</td>
    </tr>
    <tr>
      <td style="text-align: left">Valiant</td>
      <td style="text-align: right">18.1</td>
      <td style="text-align: right">6</td>
      <td style="text-align: right">225</td>
      <td style="text-align: right">105</td>
      <td style="text-align: right">2.76</td>
      <td style="text-align: right">3.460</td>
      <td style="text-align: right">20.22</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">0</td>
      <td style="text-align: right">3</td>
      <td style="text-align: right">1</td>
    </tr>
  </tbody>
</table>

<p>The Tufte package has very elegant tables reminiscent of the <code>booktabs</code> package in LaTeX. I will see if I can keep that functionality when I change themes?</p>

<h2 id="figures">Figures</h2>

<p>Another important feature will be the ability to generate figures quickly using <a href="http://ggplot2.org"><code>ggplot2</code></a> and other packages within <em>R</em>.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">df <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>gp <span class="o">=</span> <span class="kp">factor</span><span class="p">(</span><span class="kp">rep</span><span class="p">(</span><span class="kc">letters</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">],</span> each <span class="o">=</span> <span class="m">10</span><span class="p">)),</span>
                 y <span class="o">=</span> rnorm<span class="p">(</span><span class="m">30</span><span class="p">))</span>
<span class="c1"># Compute sample mean and standard deviation in each group</span>
ds <span class="o">&lt;-</span> plyr<span class="o">::</span>ddply<span class="p">(</span>df<span class="p">,</span> <span class="s">&quot;gp&quot;</span><span class="p">,</span> plyr<span class="o">::</span>summarise<span class="p">,</span> mean <span class="o">=</span> <span class="kp">mean</span><span class="p">(</span>y<span class="p">),</span> sd <span class="o">=</span> sd<span class="p">(</span>y<span class="p">))</span>


ggplot<span class="p">()</span> <span class="o">+</span>
  geom_point<span class="p">(</span>data <span class="o">=</span> df<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> gp<span class="p">,</span> y <span class="o">=</span> y<span class="p">))</span> <span class="o">+</span>
  geom_point<span class="p">(</span>data <span class="o">=</span> ds<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> gp<span class="p">,</span> y <span class="o">=</span> <span class="kp">mean</span><span class="p">),</span>
             colour <span class="o">=</span> <span class="s">&#39;red&#39;</span><span class="p">,</span> size <span class="o">=</span> <span class="m">3</span><span class="p">)</span> <span class="o">+</span>
  geom_errorbar<span class="p">(</span>data <span class="o">=</span> ds<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> gp<span class="p">,</span> y <span class="o">=</span> <span class="kp">mean</span><span class="p">,</span>
                               ymin <span class="o">=</span> mean <span class="o">-</span> sd<span class="p">,</span> ymax <span class="o">=</span> mean <span class="o">+</span> sd<span class="p">),</span>
                colour <span class="o">=</span> <span class="s">&#39;red&#39;</span><span class="p">,</span> width <span class="o">=</span> <span class="m">0.4</span><span class="p">)</span>
ggsave<span class="p">(</span>filename <span class="o">=</span> <span class="s">&quot;assets/img/Rplot.png&quot;</span><span class="p">)</span></code></pre></div>

<p><img src="/assets/img/Rplot.png" alt="A Plot output from R" /></p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>Not sure why all of the following code blocks are truncated - it may be the theme? They seem to be generally OK when viewing the actual post. <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
</div> 
        </li>
          
        <li class="listing">
          <hr class="slender">
          <a href="/articles/16/A-New-Post"><h3 class="contrast">A Refresh for the New Year</h3></a>
          <br><span class="smaller">January 4, 2016</span>  <br/>
          <div><p>Here is a New Year Post! I will be refreshing my workflow in order to work within Rstudio and output posts directly to Jekyll and Github pages (Where this blog is hosted).</p>

</div> 
        </li>
          
        <li class="listing">
          <hr class="slender">
          <a href="/articles/15/messing-about"><h3 class="contrast">The Inaugural Posting</h3></a>
          <br><span class="smaller">November 17, 2015</span>  <br/>
          <div><h1 id="introduction">Introduction</h1>

<p>Think of this as a repository to collect thoughts and code snippets for R and R packages related to phonetics and speech science.<br />
<img src="/assets/img/rhino.png" alt="A Rhino " /></p>

</div> 
        </li>
          
        <li class="listing">
          <hr class="slender">
          <a href="/articles/14/jekyll-with-knitr"><h3 class="contrast">Serve Jekyll Websites with servr and knitr</h3></a>
          <br><span class="smaller">September 28, 2014</span>  <br/>
          <div><p>The R package <a href="https://github.com/yihui/servr"><strong>servr</strong></a> can be used to set up an HTTP server to serve files under a directory. Since <strong>servr</strong> v0.2, it has added a function <code>servr::jekyll()</code> specifically designed for websites based on Jekyll and R Markdown. The main features of this function are:</p>

<ol>
  <li>R Markdown source files are re-compiled through <a href="http://yihui.name/knitr"><strong>knitr</strong></a> when their corresponding Markdown output files become older<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup> than source files;</li>
  <li>The web page will refresh itself automatically in the above case as well;</li>
</ol>

<p>As a result, all you need to do is write your blog posts (R Markdown documents), and you do not need to worry about re-building the website or calling <strong>knitr</strong> commands. Whenever you save a blog post in your text editor, the web page will be updated on the fly. This is particularly handy in the <a href="http://www.rstudio.com">RStudio IDE</a>, because after you run <code>servr::jekyll()</code> in the console, you can start writing or editing your R Markdown posts, and the HTML output, displayed in the RStudio viewer pane, will be in sync with your source post in the source panel (see the screenshot below).</p>

<p><a href="http://i.imgur.com/gKVGhiP.png"><img src="http://i.imgur.com/gKVGhiP.png" alt="Jekyll with servr and knitr" /></a></p>

<h2 id="prerequisites">Prerequisites</h2>

<p>You must have installed the packages <strong>servr</strong> (&gt;= 0.2) and <strong>knitr</strong> (&gt;= 1.8).</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">install.packages<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&#39;servr&#39;</span><span class="p">,</span> <span class="s">&#39;knitr&#39;</span><span class="p">),</span> repos <span class="o">=</span> <span class="s">&#39;http://cran.rstudio.com&#39;</span><span class="p">)</span></code></pre></div>

<p>Of course, you have to install <a href="http://jekyllrb.com">Jekyll</a> as well. For Windows users, you have to make sure <code>jekyll</code> can be found from your environment variable <code>PATH</code>, i.e., R can call it via <code>system('jekyll')</code>. This is normally not an issue for Linux or Mac OS X users (<code>gem install jekyll</code> is enough).</p>

<h2 id="r-code-chunks">R code chunks</h2>

<p>Now we write some R code chunks in this post. For example,</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">options</span><span class="p">(</span>digits <span class="o">=</span> <span class="m">3</span><span class="p">)</span>
<span class="kp">cat</span><span class="p">(</span><span class="s">&quot;hello world!&quot;</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## hello world!</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">set.seed</span><span class="p">(</span><span class="m">123</span><span class="p">)</span>
<span class="p">(</span>x <span class="o">=</span> rnorm<span class="p">(</span><span class="m">40</span><span class="p">)</span> <span class="o">+</span> <span class="m">10</span><span class="p">)</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">##  [1]  9.44  9.77 11.56 10.07 10.13 11.72 10.46  8.73  9.31  9.55 11.22
## [12] 10.36 10.40 10.11  9.44 11.79 10.50  8.03 10.70  9.53  8.93  9.78
## [23]  8.97  9.27  9.37  8.31 10.84 10.15  8.86 11.25 10.43  9.70 10.90
## [34] 10.88 10.82 10.69 10.55  9.94  9.69  9.62</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># generate a table</span>
knitr<span class="o">::</span>kable<span class="p">(</span><span class="kp">head</span><span class="p">(</span>mtcars<span class="p">))</span></code></pre></div>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: right">mpg</th>
      <th style="text-align: right">cyl</th>
      <th style="text-align: right">disp</th>
      <th style="text-align: right">hp</th>
      <th style="text-align: right">drat</th>
      <th style="text-align: right">wt</th>
      <th style="text-align: right">qsec</th>
      <th style="text-align: right">vs</th>
      <th style="text-align: right">am</th>
      <th style="text-align: right">gear</th>
      <th style="text-align: right">carb</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Mazda RX4</td>
      <td style="text-align: right">21.0</td>
      <td style="text-align: right">6</td>
      <td style="text-align: right">160</td>
      <td style="text-align: right">110</td>
      <td style="text-align: right">3.90</td>
      <td style="text-align: right">2.62</td>
      <td style="text-align: right">16.5</td>
      <td style="text-align: right">0</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">4</td>
      <td style="text-align: right">4</td>
    </tr>
    <tr>
      <td style="text-align: left">Mazda RX4 Wag</td>
      <td style="text-align: right">21.0</td>
      <td style="text-align: right">6</td>
      <td style="text-align: right">160</td>
      <td style="text-align: right">110</td>
      <td style="text-align: right">3.90</td>
      <td style="text-align: right">2.88</td>
      <td style="text-align: right">17.0</td>
      <td style="text-align: right">0</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">4</td>
      <td style="text-align: right">4</td>
    </tr>
    <tr>
      <td style="text-align: left">Datsun 710</td>
      <td style="text-align: right">22.8</td>
      <td style="text-align: right">4</td>
      <td style="text-align: right">108</td>
      <td style="text-align: right">93</td>
      <td style="text-align: right">3.85</td>
      <td style="text-align: right">2.32</td>
      <td style="text-align: right">18.6</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">4</td>
      <td style="text-align: right">1</td>
    </tr>
    <tr>
      <td style="text-align: left">Hornet 4 Drive</td>
      <td style="text-align: right">21.4</td>
      <td style="text-align: right">6</td>
      <td style="text-align: right">258</td>
      <td style="text-align: right">110</td>
      <td style="text-align: right">3.08</td>
      <td style="text-align: right">3.21</td>
      <td style="text-align: right">19.4</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">0</td>
      <td style="text-align: right">3</td>
      <td style="text-align: right">1</td>
    </tr>
    <tr>
      <td style="text-align: left">Hornet Sportabout</td>
      <td style="text-align: right">18.7</td>
      <td style="text-align: right">8</td>
      <td style="text-align: right">360</td>
      <td style="text-align: right">175</td>
      <td style="text-align: right">3.15</td>
      <td style="text-align: right">3.44</td>
      <td style="text-align: right">17.0</td>
      <td style="text-align: right">0</td>
      <td style="text-align: right">0</td>
      <td style="text-align: right">3</td>
      <td style="text-align: right">2</td>
    </tr>
    <tr>
      <td style="text-align: left">Valiant</td>
      <td style="text-align: right">18.1</td>
      <td style="text-align: right">6</td>
      <td style="text-align: right">225</td>
      <td style="text-align: right">105</td>
      <td style="text-align: right">2.76</td>
      <td style="text-align: right">3.46</td>
      <td style="text-align: right">20.2</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">0</td>
      <td style="text-align: right">3</td>
      <td style="text-align: right">1</td>
    </tr>
  </tbody>
</table>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="p">(</span><span class="kr">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kr">if</span> <span class="p">(</span><span class="kc">TRUE</span><span class="p">)</span> <span class="m">1</span> <span class="o">+</span> <span class="m">1</span>  <span class="c1"># a boring comment</span>
<span class="p">})()</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] 2</code></pre></div>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">names</span><span class="p">(</span><span class="kp">formals</span><span class="p">(</span>servr<span class="o">::</span>jekyll<span class="p">))</span>  <span class="c1"># arguments of the jekyll() function</span></code></pre></div>

<div class="highlight"><pre><code class="language-text" data-lang="text">## [1] &quot;dir&quot;     &quot;input&quot;   &quot;output&quot;  &quot;script&quot;  &quot;serve&quot;   &quot;command&quot; &quot;...&quot;</code></pre></div>

<p>Just to test inline R expressions<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup> in <strong>knitr</strong>, we know the first element in <code>x</code> (created in the code chunk above) is 9.44. You can certainly draw some graphs as well:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">par<span class="p">(</span>mar <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">.1</span><span class="p">,</span> <span class="m">.1</span><span class="p">))</span>
plot<span class="p">(</span>cars<span class="p">,</span> pch <span class="o">=</span> <span class="m">19</span><span class="p">,</span> col <span class="o">=</span> <span class="s">&#39;red&#39;</span><span class="p">)</span>  <span class="c1"># a scatterplot</span></code></pre></div>

<p><img src="/figures/cars-1.png" alt="A scatterplot of the cars data" /></p>

<h2 id="the-build-script">The build script</h2>

<p>Zero-configuration is required for <code>servr::jekyll()</code> to work on your Jekyll website. However, there is always demand for more control over some options, which can be defined in a custom build script. Here are the arguments of <code>servr::jekyll()</code>:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">jekyll<span class="p">(</span>dir <span class="o">=</span> <span class="s">&quot;.&quot;</span><span class="p">,</span> input <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;.&quot;</span><span class="p">,</span> <span class="s">&quot;_source&quot;</span><span class="p">,</span> <span class="s">&quot;_posts&quot;</span><span class="p">),</span> output <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;.&quot;</span><span class="p">,</span> <span class="s">&quot;_posts&quot;</span><span class="p">,</span> 
    <span class="s">&quot;_posts&quot;</span><span class="p">),</span> script <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;Makefile&quot;</span><span class="p">,</span> <span class="s">&quot;build.R&quot;</span><span class="p">),</span> serve <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> command <span class="o">=</span> <span class="s">&quot;jekyll build&quot;</span><span class="p">,</span> 
    <span class="kc">...</span><span class="p">)</span></code></pre></div>

<p>By default, <code>jekyll()</code> looks for <code>.Rmd</code> files under the root directory, the <code>_source</code> directory, and the <code>_posts</code> directory of the Jekyll website. For example, if you put your R Markdown posts under <code>_source</code>, they will be compiled to the <code>_posts</code> directory<sup id="fnref:3"><a href="#fn:3" class="footnote">3</a></sup>.</p>

<p>The <code>script</code> argument specifies a Makefile or an R script to be used to compile your R Markdown files. If it is a Makefile, <code>jekyll()</code> will run <code>make -q</code> to see if the site needs to be recompiled, then <code>make</code> if it does. If the script is an R script, say, named <code>build.R</code>, it is called via command line of the form</p>

<pre><code>Rscript build.R arg1 arg2
</code></pre>

<p>See <code>?servr::jekyll</code> for more details. You can define all your <strong>knitr</strong> options and any other options in this R script. See the script <a href="https://github.com/yihui/knitr-jekyll/blob/gh-pages/build.R">build.R</a> in the knitr-jekyll repository for an example: it will automatically set up the output renderers for <strong>knitr</strong>, e.g., when the Jekyll Markdown engine is <code>kramdown</code>, this script will call <code>knitr::render_jekyll()</code> so that the code chunk output will be put inside the Liquid tag <code>{% highlight lang %} {% endhighlight %}</code>; it also sets up some <strong>knitr</strong> chunk and package options so that figures can be displayed correctly. For those who do not wish to store images in GIT (because normally they are binary files), you may check out how I host my images in Dropbox for this repository (see the code below <code>Sys.getenv('USER') == 'yihui'</code>).</p>

<h2 id="on-the-markdown-renderers">On the Markdown renderers</h2>

<p>Jekyll supports a number of Markdown renderers, such as kramdown, redcarpet, rdiscount, and so on. At the moment, it is a little annoying that kramdown supports LaTeX math expressions via <code>$$ math $$</code><sup id="fnref:4"><a href="#fn:4" class="footnote">4</a></sup>, but does not support syntax highlighting of code blocks using the three backticks syntax (you must write the awkward Liquid tags); on the other hand, redcarpet does not support LaTeX math but does support three backticks. In my opinion, all the different flavors and implementations of Markdown is the biggest problem of Markdown, since there is not an unambiguous spec for Markdown. <a href="http://commonmark.org">CommonMark</a> looks like a promising project to set up a common spec for Markdown, and <a href="http://johnmacfarlane.net/pandoc/">Pandoc</a> is a great implementation that has brought almost all the features that you may ever need in Markdown. You may find some Pandoc plugins for Jekyll by searching online. However, GitHub Pages does not support arbitrary Jekyll plugins, so you cannot just use a Pandoc plugin there, but that does not mean you cannot use Pandoc locally, nor does it mean you cannot push locally compiled HTML pages to GitHub Pages<sup id="fnref:5"><a href="#fn:5" class="footnote">5</a></sup>.</p>

<p>I’d love you to <a href="https://github.com/yihui/knitr-jekyll">fork</a> this repository, make some (hopefully minor) changes, and <a href="https://github.com/yihui/knitr-jekyll/issues">let me know</a> your success of using Pandoc with Jekyll. Happy hacking, and good luck!</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>Determined by the modification time of files, i.e., <code>file.info(x)[, 'mtime']</code>. <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>The syntax in R Markdown for inline expressions is <code>`r code`</code>, where <code>code</code> is the R expression that you want to evaluate, e.g. <code>x[1]</code>. <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>The reason that we may need to write R Markdown posts in <code>_source</code> instead of <code>_posts</code> is that Jekyll has <a href="https://github.com/jekyll/jekyll/pull/3147">a subtle bug</a> (fixed in v2.5.3): its variable <code>site.posts</code> will count <code>.Rmd</code> files under <code>_posts</code> as well. The consequence is, if you list all the posts of your website, the post <code>_posts/yyyy-mm-dd-foo.md</code> will show up twice due to the existence of <code>_posts/yyyy-mm-dd-foo.Rmd</code>, therefore I would recommend you to put your R Markdown posts in a separate directory, such as <code>_source</code>. <a href="#fnref:3" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:4">
      <p>Unfortunately, kramdown does not support math expressions in single dollars, e.g. <code>$ \alpha $</code>. <a href="#fnref:4" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:5">
      <p>If you choose to generate your Jekyll website locally, and push the HTML files to GitHub, you will need the file <a href="https://help.github.com/articles/using-jekyll-with-pages"><code>.nojekyll</code></a> in the root directory of your website. <a href="#fnref:5" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
</div> 
        </li>
    
  </ul>
    </article>
    <span class="print-footer">blog - hywel stoakes</span>
    <footer>
  <hr class="slender">
  <ul class="footer-links">
    <li><a href="mailto:hate@spam.net"><span class="icon-mail"></span></a></li>    
    
      <li>
        <a href="//www.twitter.com/hywel_"><span class="icon-twitter"></span></a>
      </li>
    
      <li>
        <a href="//github.com/hywel"><span class="icon-github"></span></a>
      </li>
    
      <li>
        <a href="//www.flickr.com/photos/hywel_stoakes/"><span class="icon-flickr"></span></a>
      </li>
    
      <li>
        <a href="/feed"><span class="icon-feed"></span></a>
      </li>
      
  </ul>
<div class="credits">
<span>&copy; 2016 &nbsp;&nbsp;HYWEL STOAKES</span></br> <br>
<span>This site created with the <a href="//github.com/clayh53/tufte-jekyll">Tufte theme for Phonetics, Speech, Language, and Beyond </a> in <a href="//jekyllrb.com">Jekyll</a>.</span> 
</div>  
</footer>
  </body>
</html>
